name: Debug AWS Secrets
on:
  push:
    branches:
      - main
jobs:
  debug:
    runs-on: ubuntu-latest
    steps:
      - name: Check secret availability
        run: |
          if [ -n "${{ secrets.AWS_ACCESS_KEY_ID }}" ]; then
            echo "AWS_ACCESS_KEY_ID is available (masked for security)"
          else
            echo "AWS_ACCESS_KEY_ID is NOT available"
          fi
          
          if [ -n "${{ secrets.AWS_SECRET_ACCESS_KEY }}" ]; then
            echo "AWS_SECRET_ACCESS_KEY is available (masked for security)"
          else
            echo "AWS_SECRET_ACCESS_KEY is NOT available"
          fi
      
      - name: Manually set AWS credentials
        run: |
          echo "AWS_ACCESS_KEY_ID=${{ secrets.AWS_ACCESS_KEY_ID }}" >> $GITHUB_ENV
          echo "AWS_SECRET_ACCESS_KEY=${{ secrets.AWS_SECRET_ACCESS_KEY }}" >> $GITHUB_ENV
          echo "AWS_REGION=us-east-1" >> $GITHUB_ENV
          echo "AWS_S3_BUCKET=myawsmigrate1" >> $GITHUB_ENV
      
      - name: Verify environment variables
        run: |
          if [ -n "$AWS_ACCESS_KEY_ID" ]; then
            echo "AWS_ACCESS_KEY_ID environment variable is set"
          else
            echo "AWS_ACCESS_KEY_ID environment variable is NOT set"
          fi
          
          if [ -n "$AWS_SECRET_ACCESS_KEY" ]; then
            echo "AWS_SECRET_ACCESS_KEY environment variable is set"
          else
            echo "AWS_SECRET_ACCESS_KEY environment variable is NOT set"
          fi
